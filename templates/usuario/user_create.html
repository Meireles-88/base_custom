{# templates/usuario/user_create.html #}
{% extends 'logged_in/base_logged_in.html' %}
{% load static %}

{% block title %}Criar Novo Usuário - Sistema SI{% endblock %}

{% block extra_head %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/usuario/user_form_styles.css' %}">
{% endblock %}

{% block dashboard_content %}
<div class="form-page-container">
    <div class="page-header">
        <h2 class="page-header-title">Criar Novo Usuário</h2>
    </div>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <div class="content-card form-card">
        {# enctype="multipart/form-data" é essencial para upload de arquivos (foto) #}
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="form-grid">
                {# Campos do formulário CustomUserCreationForm #}
                <div class="form-group">
                    <label for="{{ form.username.id_for_label }}">Nome de Usuário:</label>
                    {{ form.username }}
                </div>

                <div class="form-group">
                    <label for="{{ form.password.id_for_label }}">Senha:</label>
                    {{ form.password }}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.cargo.id_for_label }}">Cargo:</label>
                    {{ form.cargo }}
                </div>

                <div class="form-group">
                    <label for="{{ form.instituicao.id_for_label }}">Instituição:</label>
                    {{ form.instituicao }}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.cpf.id_for_label }}">CPF:</label>
                    {{ form.cpf }}
                </div>

                <div class="form-group">
                    <label for="{{ form.celular.id_for_label }}">Celular:</label>
                    {{ form.celular }}
                </div>

                <div class="form-group">
                    <label for="{{ form.fone.id_for_label }}">Telefone Fixo:</label>
                    {{ form.fone }}
                </div>

                <div class="form-group full-width">
                    <label for="{{ form.foto.id_for_label }}">Foto do Perfil:</label>
                    {{ form.foto }}
                </div>
                
                <div class="form-group-check full-width">
                    {{ form.ativo }}
                    <label for="{{ form.ativo.id_for_label }}">Usuário Ativo</label>
                </div>
            </div>

            <div class="form-actions">
                <a href="{% url 'usuario:user_list' %}" class="btn btn-secondary-custom">Cancelar</a>
                <button type="submit" class="btn btn-primary-custom"><i class="bi bi-check-lg"></i> Criar Usuário</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}